---
- name: Configure system and dotfiles
  hosts: localhost
  gather_facts: yes
  tasks:
    - name: Include macOS tasks
      include_tasks: tasks/macos.yml
      when: ansible_facts['os_family'] == 'Darwin'
      tags:
        - macos
        - brew
        - cask
    - name: Include Dotfiles tasks
      include_tasks: tasks/dotfiles.yml
      tags:
        - fish
        - neovim
        - tmux
        - git
        - config
        - shell
        - sudo

    - name: Include Ubuntu tasks
      include_tasks: tasks/ubuntu.yml
      when: ansible_facts['os_family'] == 'Debian'
      tags:
        - ubuntu
        - apt

    - name: Include Dotfiles tasks
      include_tasks: tasks/dotfiles.yml

    - name: Configure Tmux
      include_tasks: tasks/tmux.yml
      tags:
        - tmux

    - name: Include VS Code tasks
      include_tasks: tasks/vscode.yml
      when: ansible_facts['os_family'] == 'Debian'
      tags:
        - vscode
        - extensions
        - install
